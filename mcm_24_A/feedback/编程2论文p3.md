# 问题三 交付文档

## 计算结果

- 目标：找出最小螺距 p，使得当链条运行/收回过程中龙头前把手能进入半径 `R = 4.5 m` 的调头空间。
- 本次实现结论（基于当前模型和判定准则）：最小可行螺距 p_min ≈ 0.450338 **m**（精确到 0.000001 m）。

## 算法逻辑

### 用了什么算法

- 为每个 p 构造专用的采样/帧计算函数（`build_interpolators`），避免修改全局状态。
- 对于给定 p，运行碰撞检测（复用问题2实现），若发生碰撞以碰撞时刻为停止，否则以 t_max 为停止时刻；计算停止时刻的龙头半径 `r_head = b * θ_head(t_stop)`，判断是否 `r_head ≤ R`。
- 网格搜索（多级细化）用于找到最小可行 p：粗步长确定可行/不可行区间，再在区间内逐级细化（0.05 → 0.01 → 0.001）。

### 是否需要优化/已优化

- 已提供替代的二分策略（如需更高精度可切换为二分搜索）。
- 采用 numba 加速关键局部函数，保证大规模采样时性能可接受。

## 调参过程

### 动了哪几个参数

- 网格步长：0.05（粗）→ 0.01 → 0.001（精）
- 判定时间 `t_max`：默认 800s，可根据需要调整以保证充分缠绕与收回过程。
- 牛顿、弧长反函数容差与最大迭代次数：同问题一，保证位置计算精度。

### 参数优化图像

- 对不同步长与不同 t_max 的敏感性测试，给出 p_min 的收敛曲线（建议将测试数据绘出以便展示）。

### 敏感性分析

- p_min 对判定时刻（是否以碰撞时刻停止或以 t_max 停止）较敏感；若判定规则改为“在任意时刻最大半径不超过 R”，结果会不同。
- 初始角度、头部速度及链条长度等参数都会影响最终 p_min，应在最终报告中列出不确定度分析。

## 算法实现最难的部分

### 总体思想

- 在给定物理模型下将几何、动力与碰撞耦合，保证在每个 p 下复现真实轨迹并准确判定边界。

### 难点说明

- 避免在过早的碰撞触发时就错误判定（需合理设置采样起始时间与步长）；
- 网格搜索需要小心边界管理以保证不会返回错误（实现时已修复原先返回最大可行值的逻辑错误）。

## 可视化

- 可进一步利用高级绘图软件：p 与 r_head 曲线、网格搜索采样点分布、碰撞时刻示意帧以及对比不同判定准则（如“任意时刻最大半径≤R” vs “停止/最终时刻≤R”）的可视化。

---

## 推荐的后续工作

- 将 `search_p_min` 中的网格搜索替换为二分搜索以获得更高精度（例如 1e-6）；
- 在报告中加入完整的不确定性/敏感性分析并把关键图表嵌入最终交付文档；
- 生成最终的 xlsx/表格汇总（每个 p 的样本数据）并存档。
